@using ERP_EvaluationManagement.DTOs.Responses
@using System.Net.Http.Json;
@inject NavigationManager NavigationManager

<MudContainer Class="result-container">
    <h1 class="result-header pb-3" style="color:blue">Batches</h1>
    <MudTable Items="_batches" Hover="true" Bordered="true" Outlined="true">
        <HeaderContent>
            <MudTh>Batch</MudTh>
            <MudTh></MudTh>
        </HeaderContent>
        <RowTemplate Context="batch">
            <MudTd>@batch.BatchName</MudTd>
            <MudTd>
                <button class="btn btn-primary" @onclick="() => ViewModuleInformation(batch.BatchId)">
                    View Details
                </button>
            </MudTd>
        </RowTemplate>
    </MudTable>
</MudContainer>


@code {

    private HttpClient Http = new HttpClient();
    private List<GetBatchResponse> _batches = new List<GetBatchResponse>();

    protected override async Task OnInitializedAsync()
    {
        await LoadModulesAsync();
    }

    private async Task LoadModulesAsync()
    {
        _batches = await Http.GetFromJsonAsync<List<GetBatchResponse>>($"https://localhost:7007/api/Batch");
    }

    private void ViewModuleInformation(Guid batchId)
    {
        NavigationManager.NavigateTo($"/RequestManagementTabse/BatchRequest/{batchId}");
    }
}

<link rel="stylesheet" href="styles.css" />